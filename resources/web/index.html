<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Task - Web UI</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <!-- Welcome Animation Overlay -->
  <div id="welcome-overlay" class="welcome-overlay">
    <div class="welcome-content">
      <div class="welcome-icon">ğŸš€</div>
      <h1 class="welcome-title">Welcome to SmartTask</h1>
      <p class="welcome-subtitle">Your gamified productivity companion</p>
      <div class="welcome-loader">
        <div class="welcome-loader-bar"></div>
      </div>
      <p class="welcome-hint">Loading your adventure...</p>
    </div>
  </div>

  <!-- Exit Confirmation Overlay -->
  <div id="exit-overlay" class="exit-overlay" style="display: none;">
    <div class="exit-content">
      <div class="exit-icon">ğŸ‘‹</div>
      <h2 class="exit-title">See you later, hero!</h2>
      <p class="exit-subtitle">Your progress has been saved. Keep up the great work!</p>
      <div class="exit-stats">
        <span>ğŸ† Achievement Progress Saved</span>
        <span>ğŸ… Pomodoro Stats Recorded</span>
        <span>â­ XP Preserved</span>
      </div>
    </div>
  </div>

  <nav class="topnav">
    <a data-target="work">Tasks & Projects</a>
    <a data-target="xp">XP & Achievements</a>
    <a data-target="reminders">Reminders</a>
    <a data-target="pomo">Pomodoro</a>
    <a data-target="stats">Stats</a>
    <button id="exit-btn" class="exit-btn" title="Exit Application (Ctrl+C)">ğŸšª Exit</button>
  </nav>

  <header class="hero">
    <div>
      <p class="eyebrow">Smart Task Management</p>
      <h1>Control Center</h1>
      <p class="sub">Tasks Â· Projects Â· Reminders Â· XP Â· Pomodoro Â· Stats</p>
    </div>
    <div class="badge">Live</div>
  </header>

  <main class="grid">
    <section class="card wide" id="xp" data-view="xp">
      <div class="card-head">
        <h2>XP & Achievements</h2><span id="xp-level-pill" class="pill"></span>
      </div>
      <div class="xp-progress">
        <div class="xp-track">
          <div id="xp-bar" class="xp-fill"></div>
        </div>
        <div class="xp-meta">
          <div id="xp-level-text"></div>
          <div id="xp-progress-text" class="muted"></div>
          <div id="xp-title-text" class="muted"></div>
        </div>
      </div>
      <div class="ach-block">
        <div class="card-head small-gap">
          <h3>Achievements</h3><span id="ach-count" class="pill muted-pill"></span>
        </div>
        <div id="achievements-list" class="ach-list"></div>
        <div class="ach-edit-section">
          <div class="card-head small-gap">
            <h4>Edit Achievement</h4>
          </div>
          <form id="achievement-form" class="form inline">
            <label class="label">Achievement
              <select name="id" id="achievement-select" required>
                <option value="">Select an achievement...</option>
              </select>
            </label>
            <input name="name" id="ach-name-input" placeholder="New name (optional)" />
            <input name="description" id="ach-desc-input" placeholder="New description (optional)" />
            <label class="label">Target Value
              <input name="target" id="ach-target-input" type="number" min="1" placeholder="Target value" />
              <span class="field-hint">The number of actions required to unlock this achievement (e.g., 10 tasks completed)</span>
            </label>
            <button type="submit">Update Achievement</button>
          </form>
        </div>
        <div class="ach-create-section">
          <div class="card-head small-gap">
            <h4>Create New Achievement</h4>
          </div>
          <form id="achievement-create-form" class="form inline">
            <input name="name" placeholder="Achievement name *" required />
            <input name="description" placeholder="Description" />
            <label class="label">Target Value
              <input name="target" type="number" min="1" value="1" placeholder="Target value *" required />
              <span class="field-hint">The number of actions needed to unlock this achievement (e.g., complete 5 tasks)</span>
            </label>
            <label class="label">Reward XP
              <input name="rewardXP" type="number" min="0" value="100" placeholder="Reward XP" />
              <span class="field-hint">Experience points awarded when this achievement is unlocked</span>
            </label>
            <button type="submit">Create Achievement</button>
          </form>
        </div>
      </div>
    </section>

    <section class="card" id="tasks" data-view="work">
      <div class="card-head">
        <h2>Tasks</h2><span id="task-count" class="pill"></span>
      </div>
      <div class="gamified-inline">
        <div class="inline-block">
          <div class="eyebrow small">XP Progress</div>
          <div class="xp-track mini">
            <div id="xp-bar-inline" class="xp-fill"></div>
          </div>
          <div id="xp-inline-text" class="micro muted"></div>
        </div>
        <div class="inline-block">
          <div class="eyebrow small">Achievements</div>
          <div id="achievements-inline" class="ach-inline micro"></div>
        </div>
      </div>
      <div id="task-list" class="list"></div>
      <form id="task-form" class="form">
        <input name="name" placeholder="Name" required />
        <input name="desc" placeholder="Description" />
        <label class="label">Priority
          <select name="priority">
            <option value="0">Low *</option>
            <option value="1" selected>Medium **</option>
            <option value="2">High ***</option>
          </select>
        </label>
        <input name="due" type="date" placeholder="Due YYYY-MM-DD" />
        <label class="label">Project
          <select name="projectId" id="task-project-select">
            <option value="">(No project)</option>
          </select>
        </label>
        <button type="submit">Create Task</button>
      </form>
    </section>

    <section class="card" id="projects" data-view="work">
      <div class="card-head">
        <h2>Projects</h2><span id="project-count" class="pill"></span>
      </div>
      <div id="project-list" class="list"></div>
      <form id="project-form" class="form">
        <input name="name" placeholder="Name" required />
        <input name="desc" placeholder="Description" />
        <label class="label">Color
          <select name="color" id="project-color">
            <option value="#F44336">Red</option>
            <option value="#E91E63">Pink</option>
            <option value="#9C27B0">Purple</option>
            <option value="#3F51B5">Indigo</option>
            <option value="#2196F3">Blue</option>
            <option value="#00BCD4">Cyan</option>
            <option value="#4CAF50" selected>Green</option>
            <option value="#FFC107">Amber</option>
            <option value="#FF5722">Deep Orange</option>
            <option value="#795548">Brown</option>
            <option value="#607D8B">Blue Grey</option>
          </select>
        </label>
        <input name="target" type="date" placeholder="Target YYYY-MM-DD" />
        <button type="submit">Create Project</button>
      </form>
    </section>

    <section class="card" id="reminders" data-view="reminders">
      <div class="card-head">
        <h2>Reminders</h2><span id="reminder-count" class="pill"></span>
      </div>
      <div id="reminder-list" class="list"></div>
      <form id="reminder-form" class="form">
        <input name="title" placeholder="Title" required />
        <input name="message" placeholder="Message" />
        <input name="time" type="datetime-local" step="1" placeholder="Time YYYY-MM-DD HH:MM:SS" required />
        <label class="label">Recurrence
          <select name="recurrence">
            <option value="once">Once</option>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </label>
        <label class="label">Task Link
          <select name="taskId" id="reminder-task-select">
            <option value="">(No task)</option>
          </select>
        </label>
        <button type="submit">Create Reminder</button>
      </form>
    </section>

    <section class="card wide" id="pomo" data-view="pomo">
      <div class="card-head"><h2>Pomodoro & Focus Timer</h2></div>
      <div class="pomo-display">
        <div id="pomo-timer" class="pomo-timer">--:--</div>
        <div id="pomo-mode" class="pomo-mode muted">Ready to start</div>
        <div class="xp-track pomo-track">
          <div id="pomo-progress-bar" class="xp-fill"></div>
        </div>
      </div>
      <div class="pomo-settings">
        <div class="setting-item">
          <span class="muted micro">Work:</span> <span id="pomo-work-duration">25</span> min
        </div>
        <div class="setting-item">
          <span class="muted micro">Break:</span> <span id="pomo-break-duration">5</span> min
        </div>
        <div class="setting-item">
          <span class="muted micro">Long Break:</span> <span id="pomo-long-duration">15</span> min
        </div>
      </div>
      <div class="controls">
        <button data-action="pomo-work">ğŸ… Start Work</button>
        <button data-action="pomo-break">â˜• Short Break</button>
        <button data-action="pomo-long">ğŸ›‹ï¸ Long Break</button>
        <button id="pomo-pause-btn" data-action="pomo-pause" style="display:none;">â¸ï¸ Pause</button>
        <button id="pomo-resume-btn" data-action="pomo-resume" style="display:none;">â–¶ï¸ Resume</button>
        <button id="pomo-abandon-btn" data-action="pomo-abandon" class="btn-abandon">ğŸš« Abandon Session</button>
      </div>
      <div id="pomo-status" class="muted micro"></div>
      <div class="pomo-stats">
        <div class="stat-item">
          <span class="stat-label">Today's Cycles:</span>
          <span id="pomo-today-cycles" class="stat-value">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Total Cycles:</span>
          <span id="pomo-total-cycles" class="stat-value">0</span>
        </div>
      </div>
    </section>

    <section class="card wide" id="stats" data-view="stats">
      <div class="card-head"><h2>Statistics & Analytics</h2></div>
      <div class="stats-summary">
        <div class="stat-card">
          <div class="stat-icon">âœ…</div>
          <div class="stat-info">
            <span id="stat-tasks-completed" class="stat-value">0</span>
            <span class="stat-label">Tasks Completed</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-info">
            <span id="stat-completion-rate" class="stat-value">0%</span>
            <span class="stat-label">Completion Rate</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ”¥</div>
          <div class="stat-info">
            <span id="stat-streak" class="stat-value">0</span>
            <span class="stat-label">Day Streak</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ…</div>
          <div class="stat-info">
            <span id="stat-pomodoros" class="stat-value">0</span>
            <span class="stat-label">Total Pomodoros</span>
          </div>
        </div>
      </div>
      <!-- Visual heatmap will be inserted here dynamically -->
      <div id="heatmap-wrapper"></div>
      <div class="controls">
        <button data-stat="summary">ğŸ“ˆ Summary</button>
        <button data-stat="daily">ğŸ“… Daily</button>
        <button data-stat="weekly">ğŸ“† Weekly</button>
        <button data-stat="monthly">ğŸ“Š Monthly</button>
        <button data-stat="heatmap">ğŸ”¥ Heatmap</button>
      </div>
      <div id="stat-box" class="stat-box-container"></div>
    </section>
  </main>

  <script src="/static/main.js"></script>
</body>
</html>
