# 🎨 Qt/QML UI 方案提案 (Duolingo Style)

## 📊 代码分析摘要

基于对仓库代码的分析，现有系统支持以下核心功能：

### 数据实体
| 实体 | 关键字段 | 游戏化潜力 |
|------|----------|------------|
| **Task** | id, title, description, priority, due_date, completed, tags, pomodoro_count | ⭐⭐⭐ 任务卡片、完成动效 |
| **Project** | id, name, description, color_label, progress, total_tasks, completed_tasks | ⭐⭐⭐ 进度环、项目岛屿 |
| **Challenge** | type, target_value, current_value, reward_xp, completed | ⭐⭐⭐⭐ 挑战卡、领奖动效 |
| **Achievement** | name, icon, unlocked, progress, target_value, reward_xp | ⭐⭐⭐⭐⭐ 徽章墙、解锁特效 |
| **UserStats** | total_xp, level, current_streak, longest_streak, completion_rate | ⭐⭐⭐⭐⭐ 等级进度条、连胜火焰 |

### 现有业务逻辑
- ✅ TaskManager: CRUD, 完成任务, 番茄钟统计
- ✅ ProjectManager: 项目管理, 进度追踪
- ✅ XPSystem: 经验值奖励, 等级计算, 称号系统
- ✅ StatisticsAnalyzer: 各维度统计, 热力图数据
- ✅ AchievementManager: 成就解锁, 进度追踪

---

## 🎮 方案一：Quest Tracker（任务追踪者）

**侧重点**: 闯关感 + 叙事驱动

### 设计理念
将任务系统包装为 RPG 游戏的"任务日志"，用户是勇敢的冒险者，每完成一个任务就是完成一个"Quest"。

### 核心界面
```
┌─────────────────────────────────────────────────────┐
│  🏰 Quest Tracker                    Lv.5 ⚔️        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  XP: [████████░░░░░░░░] 450/800      🔥 7 Day Streak │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📜 Active Quests                                   │
│  ┌─────────────────────────────────────────────┐   │
│  │  ⚔️ 完成数据库模块            [!] 高优先级   │   │
│  │     "勇士，数据库之龙等待被征服..."           │   │
│  │     🍅 0/8 番茄钟   📅 截止: 2天后            │   │
│  │     [开始任务]  [查看详情]                    │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  📋 编写测试用例               [●] 进行中    │   │
│  │     🍅 ████░░░░ 3/5                          │   │
│  │     [继续冒险]                                │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  🏆 Today's Challenge: "完成3个任务" [██░░░] 1/3   │
│                                                     │
├─────────────────────────────────────────────────────┤
│  [📜 任务]  [🗺️ 项目]  [🏆 成就]  [📊 统计]  [⚙️]   │
└─────────────────────────────────────────────────────┘
```

### 交互动效
| 动作 | 动效描述 |
|------|----------|
| 完成任务 | 任务卡片发光 → 碎片化消散 → XP数字飞向顶栏 → 进度条增长动画 |
| 升级 | 全屏金色光芒 → 等级徽章放大旋转 → 称号更新 → 礼花粒子效果 |
| 连续打卡 | 🔥 图标脉冲发光 → 数字递增 → 火焰粒子飘散 |
| 创建任务 | 羊皮纸展开动画 → 文字逐字显示 |

### 技术实现重点
- 使用 `ParticleSystem` 实现粒子特效
- 任务卡片使用 `SwipeDelegate` 支持左滑删除、右滑完成
- 使用 `NumberAnimation` 实现 XP 数字滚动

---

## 🎮 方案二：Sprint Board（极速看板）

**侧重点**: 极速操作 + 拖拽交互

### 设计理念
类似 Trello 的看板视图，但融入游戏化元素。拖拽任务到"完成"列时触发奖励动画。

### 核心界面
```
┌─────────────────────────────────────────────────────────────┐
│  🚀 Sprint Board                          [+ 新任务]  [⚙️]  │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│  Lv.5 冒险者  [████████░░] 450 XP   🔥7   🏆12/30           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   📥 待办 (3)          🔄 进行中 (2)        ✅ 已完成 (5)   │
│  ┌───────────┐       ┌───────────┐       ┌───────────┐     │
│  │ 🔴 数据库  │       │ 🟡 测试    │       │ ✨ UI设计  │     │
│  │ 截止: 2天  │  →→→  │ 🍅 3/5    │  →→→  │ +25 XP ✓  │     │
│  │ +30 XP    │       │ 进度: 60% │       │           │     │
│  └───────────┘       └───────────┘       └───────────┘     │
│  ┌───────────┐       ┌───────────┐       ┌───────────┐     │
│  │ 🟠 文档    │       │ 🟢 重构    │       │ ✨ 需求分析│     │
│  │ 截止: 5天  │       │ 🍅 1/3    │       │ +20 XP ✓  │     │
│  └───────────┘       └───────────┘       └───────────┘     │
│  ┌───────────┐                           ┌───────────┐     │
│  │ 🟢 Review │                           │ ...       │     │
│  └───────────┘                           └───────────┘     │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  🎯 每日挑战: 完成3个任务 [██░░░░░░░░] 1/3  ⏰ 剩余 6小时    │
└─────────────────────────────────────────────────────────────┘
```

### 交互动效
| 动作 | 动效描述 |
|------|----------|
| 拖拽任务 | 卡片抬起 + 阴影增大 → 目标列高亮 → 松手时弹性落入 |
| 拖入完成列 | 卡片闪烁 → 发射星星粒子 → XP 飞向顶栏 |
| 优先级变化 | 颜色渐变过渡 (红→黄→绿) |
| 快速添加 | 顶部输入框展开 → 卡片从顶部滑入 |

### 技术实现重点
- 使用 `DragHandler` 和 `DropArea` 实现拖拽
- 使用 `GridView` 或 `Flow` 布局列内卡片
- 卡片颜色通过 `priority` 字段动态绑定

---

## 🎮 方案三：Achievement Garden（成就花园）

**侧重点**: 数据可视化 + 长期成长感

### 设计理念
将用户的进度可视化为一个"成长中的花园"。完成任务会让树木成长，解锁成就会种下新的植物。

### 核心界面
```
┌─────────────────────────────────────────────────────────────┐
│  🌳 Achievement Garden              Lv.5 园丁    🔥7天连胜  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│     🌸         🌲              🌻                           │
│    /│\        /|\             /│\       🌱  🌱              │
│     │      ████████            │                            │
│   ════    "番茄大师"         ════      (待解锁)             │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 本月进度                                         │   │
│  │  ┌──────────────────────────────────────────────┐   │   │
│  │  │ 任务完成  [████████████░░░░░░░░] 62%          │   │   │
│  │  │ 番茄钟    [██████████████░░░░░░] 70%          │   │   │
│  │  │ 连胜天数  [████████░░░░░░░░░░░░] 35%          │   │   │
│  │  └──────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  📅 热力图                                                   │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  Nov: ░▓█▓░░██▓▓░░░███░░░░░░░░░░░░░░░             │   │
│  │  Oct: █████▓▓██▓▓████▓█████▓▓▓█████▓              │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  🏆 最近解锁: "起步者" (+50XP)  "7日连胜" (+100XP)          │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [🌳 花园]  [📋 任务]  [🏆 成就]  [📊 数据]  [⚙️ 设置]       │
└─────────────────────────────────────────────────────────────┘
```

### 交互动效
| 动作 | 动效描述 |
|------|----------|
| 解锁成就 | 种子从天空落下 → 土地冒出绿芽 → 快速生长动画 → 开花/结果 |
| 完成任务 | 对应"树木"生长一圈年轮 → 树冠变大 |
| 连胜增加 | 🔥 火焰飘向花园 → 植物颜色变鲜艳 |
| 查看成就详情 | 点击植物 → 放大 + 展示成就卡片 |

### 技术实现重点
- 使用 Canvas 或 SVG 绘制植物图形
- 热力图使用 `GridView` + 动态颜色绑定
- 生长动画使用 `SequentialAnimation` 编排

---

## 📋 方案对比

| 特性 | Quest Tracker | Sprint Board | Achievement Garden |
|------|--------------|--------------|-------------------|
| **主要受众** | 喜欢故事感的用户 | 注重效率的用户 | 长期主义用户 |
| **操作复杂度** | 中 | 低（拖拽为主） | 中 |
| **视觉丰富度** | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **实现难度** | 中 | 中 | 高 |
| **多邻国契合度** | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

---

## 🎯 推荐方案

**推荐实施方案一：Quest Tracker**

理由：
1. **数据适配性好** - 现有 Task/Challenge/XP 数据结构完美匹配
2. **多邻国风格契合** - 任务卡片 + 进度条 + 奖励动效是多邻国的核心体验
3. **开发效率高** - 列表视图比看板或花园更容易实现高保真效果
4. **扩展性强** - 后续可以叠加看板视图或成就花园作为补充页面

---

## 📁 资源需求清单 (需用户提供)

### A. 必需素材

| 资源路径 | 描述 | 尺寸建议 |
|----------|------|----------|
| `images/app_logo.png` | 应用 Logo (启动页/顶栏) | 256x256 |
| `images/level_badge_{1-10}.png` | 等级徽章 (共10个) | 64x64 |
| `images/empty_quest.png` | 空任务状态插画 | 200x200 |
| `images/celebration.png` | 任务完成庆祝图 | 300x300 |
| `images/streak_fire.png` | 连胜火焰图标 | 48x48 |

### B. 可选素材 (使用 Unicode/几何图形占位)

| 元素 | 占位方案 | 素材提升版 |
|------|----------|------------|
| 优先级图标 | 🔴🟡🟢 Unicode | 自定义 SVG |
| 番茄钟图标 | 🍅 Unicode | 精美 PNG |
| 任务类型图标 | 📋📁🎯 Unicode | 品牌风格图标 |
| 导航图标 | Unicode 字符 | 定制 SVG 图标集 |

---

## 🛠️ 下一步实施计划

1. **CMakeLists.txt** - 配置 Qt6 + QML 环境
2. **C++ 模型层** - 创建 TaskListModel, ProjectListModel 等适配器
3. **QML 主框架** - 实现 ApplicationWindow + StackView 导航
4. **任务卡片组件** - 带动效的 TaskCard.qml
5. **游戏化 HUD** - 顶栏 XP 进度条、等级显示

请确认您希望实施的方案，我将立即开始编码！
